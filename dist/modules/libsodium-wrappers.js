!function(e){function t(e,t){"use strict";var a,r="uint8array",n=t.ready.then(function(){function r(){if(0!==a._sodium_init())throw new Error("libsodium was not correctly initialized.");for(var t=["crypto_aead_chacha20poly1305_decrypt","crypto_aead_chacha20poly1305_decrypt_detached","crypto_aead_chacha20poly1305_encrypt","crypto_aead_chacha20poly1305_encrypt_detached","crypto_aead_chacha20poly1305_ietf_decrypt","crypto_aead_chacha20poly1305_ietf_decrypt_detached","crypto_aead_chacha20poly1305_ietf_encrypt","crypto_aead_chacha20poly1305_ietf_encrypt_detached","crypto_aead_chacha20poly1305_ietf_keygen","crypto_aead_chacha20poly1305_keygen","crypto_aead_xchacha20poly1305_ietf_decrypt","crypto_aead_xchacha20poly1305_ietf_decrypt_detached","crypto_aead_xchacha20poly1305_ietf_encrypt","crypto_aead_xchacha20poly1305_ietf_encrypt_detached","crypto_aead_xchacha20poly1305_ietf_keygen","crypto_auth","crypto_auth_hmacsha256","crypto_auth_hmacsha256_keygen","crypto_auth_hmacsha256_verify","crypto_auth_hmacsha512","crypto_auth_hmacsha512_keygen","crypto_auth_hmacsha512_verify","crypto_auth_keygen","crypto_auth_verify","crypto_box_beforenm","crypto_box_curve25519xchacha20poly1305_keypair","crypto_box_curve25519xchacha20poly1305_seal","crypto_box_curve25519xchacha20poly1305_seal_open","crypto_box_detached","crypto_box_easy","crypto_box_easy_afternm","crypto_box_keypair","crypto_box_open_detached","crypto_box_open_easy","crypto_box_open_easy_afternm","crypto_box_seal","crypto_box_seal_open","crypto_box_seed_keypair","crypto_generichash","crypto_generichash_final","crypto_generichash_init","crypto_generichash_keygen","crypto_generichash_update","crypto_hash","crypto_hash_sha256","crypto_hash_sha512","crypto_kdf_derive_from_key","crypto_kdf_keygen","crypto_kx_client_session_keys","crypto_kx_keypair","crypto_kx_seed_keypair","crypto_kx_server_session_keys","crypto_onetimeauth","crypto_onetimeauth_final","crypto_onetimeauth_init","crypto_onetimeauth_keygen","crypto_onetimeauth_update","crypto_onetimeauth_verify","crypto_pwhash","crypto_pwhash_scryptsalsa208sha256","crypto_pwhash_scryptsalsa208sha256_ll","crypto_pwhash_scryptsalsa208sha256_str","crypto_pwhash_scryptsalsa208sha256_str_verify","crypto_pwhash_str","crypto_pwhash_str_verify","crypto_scalarmult","crypto_scalarmult_base","crypto_secretbox_detached","crypto_secretbox_easy","crypto_secretbox_keygen","crypto_secretbox_open_detached","crypto_secretbox_open_easy","crypto_secretstream_xchacha20poly1305_init_pull","crypto_secretstream_xchacha20poly1305_init_push","crypto_secretstream_xchacha20poly1305_keygen","crypto_secretstream_xchacha20poly1305_pull","crypto_secretstream_xchacha20poly1305_push","crypto_secretstream_xchacha20poly1305_rekey","crypto_shorthash","crypto_shorthash_keygen","crypto_shorthash_siphashx24","crypto_sign","crypto_sign_detached","crypto_sign_ed25519_pk_to_curve25519","crypto_sign_ed25519_sk_to_curve25519","crypto_sign_ed25519_sk_to_pk","crypto_sign_ed25519_sk_to_seed","crypto_sign_final_create","crypto_sign_final_verify","crypto_sign_init","crypto_sign_keypair","crypto_sign_open","crypto_sign_seed_keypair","crypto_sign_update","crypto_sign_verify_detached","crypto_stream_chacha20","crypto_stream_chacha20_ietf_xor","crypto_stream_chacha20_ietf_xor_ic","crypto_stream_chacha20_keygen","crypto_stream_chacha20_xor","crypto_stream_chacha20_xor_ic","crypto_stream_keygen","crypto_stream_xchacha20_keygen","crypto_stream_xchacha20_xor","crypto_stream_xchacha20_xor_ic","randombytes_buf","randombytes_buf_deterministic","randombytes_close","randombytes_random","randombytes_set_implementation","randombytes_stir","randombytes_uniform","sodium_version_string"],r=[x,E,w,S,T,Y,A,K,B,I,M,L,N,U,O,R,P,C,G,D,X,V,F,H,j,z,W,J,q,Q,Z,$,ee,te,ae,re,ne,_e,se,ce,he,oe,pe,ye,ie,ue,le,ve,de,ge,be,fe,me,ke,xe,Ee,we,Se,Te,Ye,Ae,Ke,Be,Ie,Me,Le,Ne,Ue,Oe,Re,Pe,Ce,Ge,De,Xe,Ve,Fe,He,je,ze,We,Je,qe,Qe,Ze,$e,et,tt,at,rt,nt,_t,st,ct,ht,ot,pt,yt,it,ut,lt,vt,dt,gt,bt,ft,mt,kt,xt,Et,wt,St,Tt],n=0;n<r.length;n++)"function"==typeof a["_"+t[n]]&&(e[t[n]]=r[n]);var _=["SODIUM_LIBRARY_VERSION_MAJOR","SODIUM_LIBRARY_VERSION_MINOR","crypto_aead_chacha20poly1305_ABYTES","crypto_aead_chacha20poly1305_KEYBYTES","crypto_aead_chacha20poly1305_MESSAGEBYTES_MAX","crypto_aead_chacha20poly1305_NPUBBYTES","crypto_aead_chacha20poly1305_NSECBYTES","crypto_aead_chacha20poly1305_ietf_ABYTES","crypto_aead_chacha20poly1305_ietf_KEYBYTES","crypto_aead_chacha20poly1305_ietf_MESSAGEBYTES_MAX","crypto_aead_chacha20poly1305_ietf_NPUBBYTES","crypto_aead_chacha20poly1305_ietf_NSECBYTES","crypto_aead_xchacha20poly1305_ietf_ABYTES","crypto_aead_xchacha20poly1305_ietf_KEYBYTES","crypto_aead_xchacha20poly1305_ietf_MESSAGEBYTES_MAX","crypto_aead_xchacha20poly1305_ietf_NPUBBYTES","crypto_aead_xchacha20poly1305_ietf_NSECBYTES","crypto_auth_BYTES","crypto_auth_KEYBYTES","crypto_auth_hmacsha256_BYTES","crypto_auth_hmacsha256_KEYBYTES","crypto_auth_hmacsha512_BYTES","crypto_auth_hmacsha512_KEYBYTES","crypto_box_BEFORENMBYTES","crypto_box_MACBYTES","crypto_box_MESSAGEBYTES_MAX","crypto_box_NONCEBYTES","crypto_box_PUBLICKEYBYTES","crypto_box_SEALBYTES","crypto_box_SECRETKEYBYTES","crypto_box_SEEDBYTES","crypto_box_curve25519xchacha20poly1305_NONCEBYTES","crypto_box_curve25519xchacha20poly1305_PUBLICKEYBYTES","crypto_box_curve25519xchacha20poly1305_SECRETKEYBYTES","crypto_core_hchacha20_CONSTBYTES","crypto_core_hchacha20_INPUTBYTES","crypto_core_hchacha20_KEYBYTES","crypto_core_hchacha20_OUTPUTBYTES","crypto_generichash_BYTES","crypto_generichash_BYTES_MAX","crypto_generichash_BYTES_MIN","crypto_generichash_KEYBYTES","crypto_generichash_KEYBYTES_MAX","crypto_generichash_KEYBYTES_MIN","crypto_hash_BYTES","crypto_hash_sha256_BYTES","crypto_hash_sha512_BYTES","crypto_kdf_BYTES_MAX","crypto_kdf_BYTES_MIN","crypto_kdf_CONTEXTBYTES","crypto_kdf_KEYBYTES","crypto_kx_PUBLICKEYBYTES","crypto_kx_SECRETKEYBYTES","crypto_kx_SEEDBYTES","crypto_kx_SESSIONKEYBYTES","crypto_onetimeauth_BYTES","crypto_onetimeauth_KEYBYTES","crypto_pwhash_ALG_ARGON2I13","crypto_pwhash_ALG_ARGON2ID13","crypto_pwhash_ALG_DEFAULT","crypto_pwhash_BYTES_MAX","crypto_pwhash_BYTES_MIN","crypto_pwhash_MEMLIMIT_INTERACTIVE","crypto_pwhash_MEMLIMIT_MAX","crypto_pwhash_MEMLIMIT_MIN","crypto_pwhash_MEMLIMIT_MODERATE","crypto_pwhash_MEMLIMIT_SENSITIVE","crypto_pwhash_OPSLIMIT_INTERACTIVE","crypto_pwhash_OPSLIMIT_MAX","crypto_pwhash_OPSLIMIT_MIN","crypto_pwhash_OPSLIMIT_MODERATE","crypto_pwhash_OPSLIMIT_SENSITIVE","crypto_pwhash_PASSWD_MAX","crypto_pwhash_PASSWD_MIN","crypto_pwhash_SALTBYTES","crypto_pwhash_STRBYTES","crypto_pwhash_STR_VERIFY","crypto_pwhash_scryptsalsa208sha256_BYTES_MAX","crypto_pwhash_scryptsalsa208sha256_BYTES_MIN","crypto_pwhash_scryptsalsa208sha256_MEMLIMIT_INTERACTIVE","crypto_pwhash_scryptsalsa208sha256_MEMLIMIT_MAX","crypto_pwhash_scryptsalsa208sha256_MEMLIMIT_MIN","crypto_pwhash_scryptsalsa208sha256_MEMLIMIT_SENSITIVE","crypto_pwhash_scryptsalsa208sha256_OPSLIMIT_INTERACTIVE","crypto_pwhash_scryptsalsa208sha256_OPSLIMIT_MAX","crypto_pwhash_scryptsalsa208sha256_OPSLIMIT_MIN","crypto_pwhash_scryptsalsa208sha256_OPSLIMIT_SENSITIVE","crypto_pwhash_scryptsalsa208sha256_SALTBYTES","crypto_pwhash_scryptsalsa208sha256_STRBYTES","crypto_pwhash_scryptsalsa208sha256_STR_VERIFY","crypto_scalarmult_BYTES","crypto_scalarmult_SCALARBYTES","crypto_secretbox_KEYBYTES","crypto_secretbox_MACBYTES","crypto_secretbox_MESSAGEBYTES_MAX","crypto_secretbox_NONCEBYTES","crypto_secretstream_xchacha20poly1305_ABYTES","crypto_secretstream_xchacha20poly1305_HEADERBYTES","crypto_secretstream_xchacha20poly1305_KEYBYTES","crypto_secretstream_xchacha20poly1305_MESSAGEBYTES_MAX","crypto_secretstream_xchacha20poly1305_MESSAGESBYTES_MAX","crypto_secretstream_xchacha20poly1305_NPUBBYTES","crypto_secretstream_xchacha20poly1305_TAG_FINAL","crypto_secretstream_xchacha20poly1305_TAG_MESSAGE","crypto_secretstream_xchacha20poly1305_TAG_PUSH","crypto_secretstream_xchacha20poly1305_TAG_REKEY","crypto_shorthash_BYTES","crypto_shorthash_KEYBYTES","crypto_shorthash_siphashx24_BYTES","crypto_shorthash_siphashx24_KEYBYTES","crypto_sign_BYTES","crypto_sign_MESSAGEBYTES_MAX","crypto_sign_PUBLICKEYBYTES","crypto_sign_SECRETKEYBYTES","crypto_sign_SEEDBYTES","crypto_stream_KEYBYTES","crypto_stream_MESSAGEBYTES_MAX","crypto_stream_NONCEBYTES","crypto_stream_chacha20_KEYBYTES","crypto_stream_chacha20_NONCEBYTES","crypto_stream_chacha20_ietf_KEYBYTES","crypto_stream_chacha20_ietf_MESSAGEBYTES_MAX","crypto_stream_chacha20_ietf_NONCEBYTES","crypto_stream_xchacha20_KEYBYTES","crypto_stream_xchacha20_MESSAGEBYTES_MAX","crypto_stream_xchacha20_NONCEBYTES","randombytes_SEEDBYTES"];for(n=0;n<_.length;n++)"function"==typeof(c=a["_"+_[n].toLowerCase()])&&(e[_[n]]=c());var s=["SODIUM_VERSION_STRING","crypto_pwhash_STRPREFIX","crypto_pwhash_scryptsalsa208sha256_STRPREFIX"];for(n=0;n<s.length;n++){var c;"function"==typeof(c=a["_"+s[n].toLowerCase()])&&(e[s[n]]=a.Pointer_stringify(c()))}}a=t;try{r();var n=new Uint8Array([98,97,108,108,115]),_=e.randombytes_buf(e.crypto_secretbox_NONCEBYTES),s=e.randombytes_buf(e.crypto_secretbox_KEYBYTES),c=e.crypto_secretbox_easy(n,_,s),h=e.crypto_secretbox_open_easy(c,_,s);if(e.memcmp(n,h))return}catch(e){}a.useBackupModule(),r()});function _(e){if("function"==typeof TextEncoder)return new TextEncoder("utf-8").encode(e);e=unescape(encodeURIComponent(e));for(var t=new Uint8Array(e.length),a=0;a<e.length;a++)t[a]=e.charCodeAt(a);return t}function s(e){if("function"==typeof TextDecoder)return new TextDecoder("utf-8",{fatal:!0}).decode(e);var t=Math.ceil(e.length/8192);if(t<=1)try{return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))}catch(e){throw new TypeError("The encoded data was not valid.")}for(var a="",r=0,n=0;n<t;n++){var _=Array.prototype.slice.call(e,8192*n+r,8192*(n+1)+r);if(0!=_.length){var c,h=_.length,o=0;do{var p=_[--h];p>=240?(o=4,c=!0):p>=224?(o=3,c=!0):p>=192?(o=2,c=!0):p<128&&(o=1,c=!0)}while(!c);for(var y=o-(_.length-h),i=0;i<y;i++)r--,_.pop();a+=s(_)}}return a}function c(e){e=k(null,e,"input");for(var t,a,r,n="",_=0;_<e.length;_++)r=87+(a=15&e[_])+(a-10>>8&-39)<<8|87+(t=e[_]>>>4)+(t-10>>8&-39),n+=String.fromCharCode(255&r)+String.fromCharCode(r>>>8);return n}var h={ORIGINAL:1,ORIGINAL_NO_PADDING:3,URLSAFE:5,URLSAFE_NO_PADDING:7};function o(e){if(void 0==e)return h.URLSAFE_NO_PADDING;if(e!==h.ORIGINAL&&e!==h.ORIGINAL_NO_PADDING&&e!==h.URLSAFE&&e!=h.URLSAFE_NO_PADDING)throw new Error("unsupported base64 variant");return e}function p(e,t){t=o(t),e=k(n,e,"input");var r,n=[],_=0|Math.floor(e.length/3),c=e.length-3*_,h=4*_+(0!==c?0==(2&t)?4:2+(c>>>1):0),p=new l(h+1),y=v(e);return n.push(y),n.push(p.address),0===a._sodium_bin2base64(p.address,p.length,y,e.length,t)&&b(n,"conversion failed"),p.length=h,r=s(p.to_Uint8Array()),g(n),r}function y(e,t){var a=t||r;if(!i(a))throw new Error(a+" output format is not available");if(e instanceof l){if("uint8array"===a)return e.to_Uint8Array();if("text"===a)return s(e.to_Uint8Array());if("hex"===a)return c(e.to_Uint8Array());if("base64"===a)return p(e.to_Uint8Array(),h.URLSAFE_NO_PADDING);throw new Error('What is output format "'+a+'"?')}if("object"==typeof e){for(var n=Object.keys(e),_={},o=0;o<n.length;o++)_[n[o]]=y(e[n[o]],a);return _}if("string"==typeof e)return e;throw new TypeError("Cannot format output")}function i(e){for(var t=["uint8array","text","hex","base64"],a=0;a<t.length;a++)if(t[a]===e)return!0;return!1}function u(e){if(e){if("string"!=typeof e)throw new TypeError("When defined, the output format must be a string");if(!i(e))throw new Error(e+" is not a supported output format")}}function l(e){this.length=e,this.address=d(e)}function v(e){var t=d(e.length);return a.HEAPU8.set(e,t),t}function d(e){var t=a._malloc(e);if(0===t)throw{message:"_malloc() failed",length:e};return t}function g(e){if(e)for(var t=0;t<e.length;t++)r=e[t],a._free(r);var r}function b(e,t){throw g(e),new Error(t)}function f(e,t){throw g(e),new TypeError(t)}function m(e,t,a){void 0==t&&f(e,a+" cannot be null or undefined")}function k(e,t,a){return m(e,t,a),t instanceof Uint8Array?t:"string"==typeof t?_(t):void f(e,"unsupported input type for "+a)}function x(e,t,r,n,_,s){var c=[];u(s);var h=null;void 0!=e&&(h=v(e=k(c,e,"secret_nonce")),e.length,c.push(h)),t=k(c,t,"ciphertext");var o,p=0|a._crypto_aead_chacha20poly1305_abytes();t.length!==p&&f(c,"invalid ciphertext length"),o=v(t),c.push(o);var i=null,d=0;void 0!=r&&(i=v(r=k(c,r,"additional_data")),d=r.length,c.push(i)),n=k(c,n,"public_nonce");var m,x=0|a._crypto_aead_chacha20poly1305_npubbytes();n.length!==x&&f(c,"invalid public_nonce length"),m=v(n),c.push(m),_=k(c,_,"key");var E,w=0|a._crypto_aead_chacha20poly1305_keybytes();_.length!==w&&f(c,"invalid key length"),E=v(_),c.push(E);var S=new l(p-a._crypto_aead_chacha20poly1305_abytes()|0),T=S.address;if(c.push(T),0===a._crypto_aead_chacha20poly1305_decrypt(T,null,h,o,p,0,i,d,0,m,E)){var Y=y(S,s);return g(c),Y}b(c,"invalid usage")}function E(e,t,r,n,_,s,c){var h=[];u(c);var o=null;void 0!=e&&(o=v(e=k(h,e,"secret_nonce")),e.length,h.push(o));var p=v(t=k(h,t,"ciphertext")),i=t.length;h.push(p),r=k(h,r,"mac");var d,m=0|a._crypto_box_macbytes();r.length!==m&&f(h,"invalid mac length"),d=v(r),h.push(d);var x=null,E=0;void 0!=n&&(x=v(n=k(h,n,"additional_data")),E=n.length,h.push(x)),_=k(h,_,"public_nonce");var w,S=0|a._crypto_aead_chacha20poly1305_npubbytes();_.length!==S&&f(h,"invalid public_nonce length"),w=v(_),h.push(w),s=k(h,s,"key");var T,Y=0|a._crypto_aead_chacha20poly1305_keybytes();s.length!==Y&&f(h,"invalid key length"),T=v(s),h.push(T);var A=new l(0|i),K=A.address;if(h.push(K),0===a._crypto_aead_chacha20poly1305_decrypt_detached(K,o,p,i,0,d,x,E,0,w,T)){var B=y(A,c);return g(h),B}b(h,"invalid usage")}function w(e,t,r,n,_,s){var c=[];u(s);var h=v(e=k(c,e,"message")),o=e.length;c.push(h);var p=null,i=0;void 0!=t&&(p=v(t=k(c,t,"additional_data")),i=t.length,c.push(p));var d=null;void 0!=r&&(d=v(r=k(c,r,"secret_nonce")),r.length,c.push(d)),n=k(c,n,"public_nonce");var m,x=0|a._crypto_aead_chacha20poly1305_npubbytes();n.length!==x&&f(c,"invalid public_nonce length"),m=v(n),c.push(m),_=k(c,_,"key");var E,w=0|a._crypto_aead_chacha20poly1305_keybytes();_.length!==w&&f(c,"invalid key length"),E=v(_),c.push(E);var S=new l(o+a._crypto_aead_chacha20poly1305_abytes()|0),T=S.address;if(c.push(T),0===a._crypto_aead_chacha20poly1305_encrypt(T,null,h,o,0,p,i,0,d,m,E)){var Y=y(S,s);return g(c),Y}b(c,"invalid usage")}function S(e,t,r,n,_,s){var c=[];u(s);var h=v(e=k(c,e,"message")),o=e.length;c.push(h);var p=null,i=0;void 0!=t&&(p=v(t=k(c,t,"additional_data")),i=t.length,c.push(p));var d=null;void 0!=r&&(d=v(r=k(c,r,"secret_nonce")),r.length,c.push(d)),n=k(c,n,"public_nonce");var m,x=0|a._crypto_aead_chacha20poly1305_npubbytes();n.length!==x&&f(c,"invalid public_nonce length"),m=v(n),c.push(m),_=k(c,_,"key");var E,w=0|a._crypto_aead_chacha20poly1305_keybytes();_.length!==w&&f(c,"invalid key length"),E=v(_),c.push(E);var S=new l(0|o),T=S.address;c.push(T);var Y=new l(0|a._crypto_aead_chacha20poly1305_abytes()),A=Y.address;if(c.push(A),0===a._crypto_aead_chacha20poly1305_encrypt_detached(T,A,null,h,o,0,p,i,0,d,m,E)){var K=y({ciphertext:S,mac:Y},s);return g(c),K}b(c,"invalid usage")}function T(e,t,r,n,_,s){var c=[];u(s);var h=null;void 0!=e&&(h=v(e=k(c,e,"secret_nonce")),e.length,c.push(h)),t=k(c,t,"ciphertext");var o,p=0|a._crypto_aead_chacha20poly1305_ietf_abytes();t.length!==p&&f(c,"invalid ciphertext length"),o=v(t),c.push(o);var i=null,d=0;void 0!=r&&(i=v(r=k(c,r,"additional_data")),d=r.length,c.push(i)),n=k(c,n,"public_nonce");var m,x=0|a._crypto_aead_chacha20poly1305_ietf_npubbytes();n.length!==x&&f(c,"invalid public_nonce length"),m=v(n),c.push(m),_=k(c,_,"key");var E,w=0|a._crypto_aead_chacha20poly1305_ietf_keybytes();_.length!==w&&f(c,"invalid key length"),E=v(_),c.push(E);var S=new l(p-a._crypto_aead_chacha20poly1305_ietf_abytes()|0),T=S.address;if(c.push(T),0===a._crypto_aead_chacha20poly1305_ietf_decrypt(T,null,h,o,p,0,i,d,0,m,E)){var Y=y(S,s);return g(c),Y}b(c,"invalid usage")}function Y(e,t,r,n,_,s,c){var h=[];u(c);var o=null;void 0!=e&&(o=v(e=k(h,e,"secret_nonce")),e.length,h.push(o));var p=v(t=k(h,t,"ciphertext")),i=t.length;h.push(p),r=k(h,r,"mac");var d,m=0|a._crypto_box_macbytes();r.length!==m&&f(h,"invalid mac length"),d=v(r),h.push(d);var x=null,E=0;void 0!=n&&(x=v(n=k(h,n,"additional_data")),E=n.length,h.push(x)),_=k(h,_,"public_nonce");var w,S=0|a._crypto_aead_chacha20poly1305_ietf_npubbytes();_.length!==S&&f(h,"invalid public_nonce length"),w=v(_),h.push(w),s=k(h,s,"key");var T,Y=0|a._crypto_aead_chacha20poly1305_ietf_keybytes();s.length!==Y&&f(h,"invalid key length"),T=v(s),h.push(T);var A=new l(0|i),K=A.address;if(h.push(K),0===a._crypto_aead_chacha20poly1305_ietf_decrypt_detached(K,o,p,i,0,d,x,E,0,w,T)){var B=y(A,c);return g(h),B}b(h,"invalid usage")}function A(e,t,r,n,_,s){var c=[];u(s);var h=v(e=k(c,e,"message")),o=e.length;c.push(h);var p=null,i=0;void 0!=t&&(p=v(t=k(c,t,"additional_data")),i=t.length,c.push(p));var d=null;void 0!=r&&(d=v(r=k(c,r,"secret_nonce")),r.length,c.push(d)),n=k(c,n,"public_nonce");var m,x=0|a._crypto_aead_chacha20poly1305_ietf_npubbytes();n.length!==x&&f(c,"invalid public_nonce length"),m=v(n),c.push(m),_=k(c,_,"key");var E,w=0|a._crypto_aead_chacha20poly1305_ietf_keybytes();_.length!==w&&f(c,"invalid key length"),E=v(_),c.push(E);var S=new l(o+a._crypto_aead_chacha20poly1305_ietf_abytes()|0),T=S.address;if(c.push(T),0===a._crypto_aead_chacha20poly1305_ietf_encrypt(T,null,h,o,0,p,i,0,d,m,E)){var Y=y(S,s);return g(c),Y}b(c,"invalid usage")}function K(e,t,r,n,_,s){var c=[];u(s);var h=v(e=k(c,e,"message")),o=e.length;c.push(h);var p=null,i=0;void 0!=t&&(p=v(t=k(c,t,"additional_data")),i=t.length,c.push(p));var d=null;void 0!=r&&(d=v(r=k(c,r,"secret_nonce")),r.length,c.push(d)),n=k(c,n,"public_nonce");var m,x=0|a._crypto_aead_chacha20poly1305_ietf_npubbytes();n.length!==x&&f(c,"invalid public_nonce length"),m=v(n),c.push(m),_=k(c,_,"key");var E,w=0|a._crypto_aead_chacha20poly1305_ietf_keybytes();_.length!==w&&f(c,"invalid key length"),E=v(_),c.push(E);var S=new l(0|o),T=S.address;c.push(T);var Y=new l(0|a._crypto_aead_chacha20poly1305_ietf_abytes()),A=Y.address;if(c.push(A),0===a._crypto_aead_chacha20poly1305_ietf_encrypt_detached(T,A,null,h,o,0,p,i,0,d,m,E)){var K=y({ciphertext:S,mac:Y},s);return g(c),K}b(c,"invalid usage")}function B(e){var t=[];u(e);var r=new l(0|a._crypto_aead_chacha20poly1305_ietf_keybytes()),n=r.address;t.push(n),a._crypto_aead_chacha20poly1305_ietf_keygen(n);var _=y(r,e);return g(t),_}function I(e){var t=[];u(e);var r=new l(0|a._crypto_aead_chacha20poly1305_keybytes()),n=r.address;t.push(n),a._crypto_aead_chacha20poly1305_keygen(n);var _=y(r,e);return g(t),_}function M(e,t,r,n,_,s){var c=[];u(s);var h=null;void 0!=e&&(h=v(e=k(c,e,"secret_nonce")),e.length,c.push(h)),t=k(c,t,"ciphertext");var o,p=0|a._crypto_aead_xchacha20poly1305_ietf_abytes();t.length!==p&&f(c,"invalid ciphertext length"),o=v(t),c.push(o);var i=null,d=0;void 0!=r&&(i=v(r=k(c,r,"additional_data")),d=r.length,c.push(i)),n=k(c,n,"public_nonce");var m,x=0|a._crypto_aead_xchacha20poly1305_ietf_npubbytes();n.length!==x&&f(c,"invalid public_nonce length"),m=v(n),c.push(m),_=k(c,_,"key");var E,w=0|a._crypto_aead_xchacha20poly1305_ietf_keybytes();_.length!==w&&f(c,"invalid key length"),E=v(_),c.push(E);var S=new l(p-a._crypto_aead_xchacha20poly1305_ietf_abytes()|0),T=S.address;if(c.push(T),0===a._crypto_aead_xchacha20poly1305_ietf_decrypt(T,null,h,o,p,0,i,d,0,m,E)){var Y=y(S,s);return g(c),Y}b(c,"invalid usage")}function L(e,t,r,n,_,s,c){var h=[];u(c);var o=null;void 0!=e&&(o=v(e=k(h,e,"secret_nonce")),e.length,h.push(o));var p=v(t=k(h,t,"ciphertext")),i=t.length;h.push(p),r=k(h,r,"mac");var d,m=0|a._crypto_box_macbytes();r.length!==m&&f(h,"invalid mac length"),d=v(r),h.push(d);var x=null,E=0;void 0!=n&&(x=v(n=k(h,n,"additional_data")),E=n.length,h.push(x)),_=k(h,_,"public_nonce");var w,S=0|a._crypto_aead_xchacha20poly1305_ietf_npubbytes();_.length!==S&&f(h,"invalid public_nonce length"),w=v(_),h.push(w),s=k(h,s,"key");var T,Y=0|a._crypto_aead_xchacha20poly1305_ietf_keybytes();s.length!==Y&&f(h,"invalid key length"),T=v(s),h.push(T);var A=new l(0|i),K=A.address;if(h.push(K),0===a._crypto_aead_xchacha20poly1305_ietf_decrypt_detached(K,o,p,i,0,d,x,E,0,w,T)){var B=y(A,c);return g(h),B}b(h,"invalid usage")}function N(e,t,r,n,_,s){var c=[];u(s);var h=v(e=k(c,e,"message")),o=e.length;c.push(h);var p=null,i=0;void 0!=t&&(p=v(t=k(c,t,"additional_data")),i=t.length,c.push(p));var d=null;void 0!=r&&(d=v(r=k(c,r,"secret_nonce")),r.length,c.push(d)),n=k(c,n,"public_nonce");var m,x=0|a._crypto_aead_xchacha20poly1305_ietf_npubbytes();n.length!==x&&f(c,"invalid public_nonce length"),m=v(n),c.push(m),_=k(c,_,"key");var E,w=0|a._crypto_aead_xchacha20poly1305_ietf_keybytes();_.length!==w&&f(c,"invalid key length"),E=v(_),c.push(E);var S=new l(o+a._crypto_aead_xchacha20poly1305_ietf_abytes()|0),T=S.address;if(c.push(T),0===a._crypto_aead_xchacha20poly1305_ietf_encrypt(T,null,h,o,0,p,i,0,d,m,E)){var Y=y(S,s);return g(c),Y}b(c,"invalid usage")}function U(e,t,r,n,_,s){var c=[];u(s);var h=v(e=k(c,e,"message")),o=e.length;c.push(h);var p=null,i=0;void 0!=t&&(p=v(t=k(c,t,"additional_data")),i=t.length,c.push(p));var d=null;void 0!=r&&(d=v(r=k(c,r,"secret_nonce")),r.length,c.push(d)),n=k(c,n,"public_nonce");var m,x=0|a._crypto_aead_xchacha20poly1305_ietf_npubbytes();n.length!==x&&f(c,"invalid public_nonce length"),m=v(n),c.push(m),_=k(c,_,"key");var E,w=0|a._crypto_aead_xchacha20poly1305_ietf_keybytes();_.length!==w&&f(c,"invalid key length"),E=v(_),c.push(E);var S=new l(0|o),T=S.address;c.push(T);var Y=new l(0|a._crypto_aead_xchacha20poly1305_ietf_abytes()),A=Y.address;if(c.push(A),0===a._crypto_aead_xchacha20poly1305_ietf_encrypt_detached(T,A,null,h,o,0,p,i,0,d,m,E)){var K=y({ciphertext:S,mac:Y},s);return g(c),K}b(c,"invalid usage")}function O(e){var t=[];u(e);var r=new l(0|a._crypto_aead_xchacha20poly1305_ietf_keybytes()),n=r.address;t.push(n),a._crypto_aead_xchacha20poly1305_ietf_keygen(n);var _=y(r,e);return g(t),_}function R(e,t,r){var n=[];u(r);var _=v(e=k(n,e,"message")),s=e.length;n.push(_),t=k(n,t,"key");var c,h=0|a._crypto_auth_keybytes();t.length!==h&&f(n,"invalid key length"),c=v(t),n.push(c);var o=new l(0|a._crypto_auth_bytes()),p=o.address;if(n.push(p),0==(0|a._crypto_auth(p,_,s,0,c))){var i=y(o,r);return g(n),i}b(n,"invalid usage")}function P(e,t,r){var n=[];u(r);var _=v(e=k(n,e,"message")),s=e.length;n.push(_),t=k(n,t,"key");var c,h=0|a._crypto_auth_hmacsha256_keybytes();t.length!==h&&f(n,"invalid key length"),c=v(t),n.push(c);var o=new l(0|a._crypto_auth_hmacsha256_bytes()),p=o.address;if(n.push(p),0==(0|a._crypto_auth_hmacsha256(p,_,s,0,c))){var i=y(o,r);return g(n),i}b(n,"invalid usage")}function C(e){var t=[];u(e);var r=new l(0|a._crypto_auth_hmacsha256_keybytes()),n=r.address;t.push(n),a._crypto_auth_hmacsha256_keygen(n);var _=y(r,e);return g(t),_}function G(e,t,r){var n=[];e=k(n,e,"tag");var _,s=0|a._crypto_auth_hmacsha256_bytes();e.length!==s&&f(n,"invalid tag length"),_=v(e),n.push(_);var c=v(t=k(n,t,"message")),h=t.length;n.push(c),r=k(n,r,"key");var o,p=0|a._crypto_auth_hmacsha256_keybytes();r.length!==p&&f(n,"invalid key length"),o=v(r),n.push(o);var y=0==(0|a._crypto_auth_hmacsha256_verify(_,c,h,0,o));return g(n),y}function D(e,t,r){var n=[];u(r);var _=v(e=k(n,e,"message")),s=e.length;n.push(_),t=k(n,t,"key");var c,h=0|a._crypto_auth_hmacsha512_keybytes();t.length!==h&&f(n,"invalid key length"),c=v(t),n.push(c);var o=new l(0|a._crypto_auth_hmacsha512_bytes()),p=o.address;if(n.push(p),0==(0|a._crypto_auth_hmacsha512(p,_,s,0,c))){var i=y(o,r);return g(n),i}b(n,"invalid usage")}function X(e){var t=[];u(e);var r=new l(0|a._crypto_auth_hmacsha512_keybytes()),n=r.address;t.push(n),a._crypto_auth_hmacsha512_keygen(n);var _=y(r,e);return g(t),_}function V(e,t,r){var n=[];e=k(n,e,"tag");var _,s=0|a._crypto_auth_hmacsha512_bytes();e.length!==s&&f(n,"invalid tag length"),_=v(e),n.push(_);var c=v(t=k(n,t,"message")),h=t.length;n.push(c),r=k(n,r,"key");var o,p=0|a._crypto_auth_hmacsha512_keybytes();r.length!==p&&f(n,"invalid key length"),o=v(r),n.push(o);var y=0==(0|a._crypto_auth_hmacsha512_verify(_,c,h,0,o));return g(n),y}function F(e){var t=[];u(e);var r=new l(0|a._crypto_auth_keybytes()),n=r.address;t.push(n),a._crypto_auth_keygen(n);var _=y(r,e);return g(t),_}function H(e,t,r){var n=[];e=k(n,e,"tag");var _,s=0|a._crypto_auth_bytes();e.length!==s&&f(n,"invalid tag length"),_=v(e),n.push(_);var c=v(t=k(n,t,"message")),h=t.length;n.push(c),r=k(n,r,"key");var o,p=0|a._crypto_auth_keybytes();r.length!==p&&f(n,"invalid key length"),o=v(r),n.push(o);var y=0==(0|a._crypto_auth_verify(_,c,h,0,o));return g(n),y}function j(e,t,r){var n=[];u(r),e=k(n,e,"publicKey");var _,s=0|a._crypto_box_publickeybytes();e.length!==s&&f(n,"invalid publicKey length"),_=v(e),n.push(_),t=k(n,t,"privateKey");var c,h=0|a._crypto_box_secretkeybytes();t.length!==h&&f(n,"invalid privateKey length"),c=v(t),n.push(c);var o=new l(0|a._crypto_box_beforenmbytes()),p=o.address;if(n.push(p),0==(0|a._crypto_box_beforenm(p,_,c))){var i=y(o,r);return g(n),i}b(n,"invalid usage")}function z(e){var t=[];u(e);var r=new l(0|a._crypto_box_curve25519xchacha20poly1305_publickeybytes()),n=r.address;t.push(n);var _=new l(0|a._crypto_box_curve25519xchacha20poly1305_secretkeybytes()),s=_.address;t.push(s),a._crypto_box_curve25519xchacha20poly1305_keypair(n,s);var c=y({publicKey:r,privateKey:_,keyType:"curve25519"},e);return g(t),c}function W(e,t,r){var n=[];u(r);var _=v(e=k(n,e,"message")),s=e.length;n.push(_),t=k(n,t,"publicKey");var c,h=0|a._crypto_box_curve25519xchacha20poly1305_publickeybytes();t.length!==h&&f(n,"invalid publicKey length"),c=v(t),n.push(c);var o=new l(s+a._crypto_box_curve25519xchacha20poly1305_sealbytes()|0),p=o.address;n.push(p),a._crypto_box_curve25519xchacha20poly1305_seal(p,_,s,0,c);var i=y(o,r);return g(n),i}function J(e,t,r,n){var _=[];u(n),e=k(_,e,"ciphertext");var s,c=0|a._crypto_box_curve25519xchacha20poly1305_sealbytes();e.length!==c&&f(_,"invalid ciphertext length"),s=v(e),_.push(s),t=k(_,t,"publicKey");var h,o=0|a._crypto_box_curve25519xchacha20poly1305_publickeybytes();t.length!==o&&f(_,"invalid publicKey length"),h=v(t),_.push(h),r=k(_,r,"secretKey");var p,i=0|a._crypto_box_curve25519xchacha20poly1305_secretkeybytes();r.length!==i&&f(_,"invalid secretKey length"),p=v(r),_.push(p);var d=new l(c-a._crypto_box_curve25519xchacha20poly1305_sealbytes()|0),b=d.address;_.push(b),a._crypto_box_curve25519xchacha20poly1305_seal_open(b,s,c,0,h,p);var m=y(d,n);return g(_),m}function q(e,t,r,n,_){var s=[];u(_);var c=v(e=k(s,e,"message")),h=e.length;s.push(c),t=k(s,t,"nonce");var o,p=0|a._crypto_box_noncebytes();t.length!==p&&f(s,"invalid nonce length"),o=v(t),s.push(o),r=k(s,r,"publicKey");var i,d=0|a._crypto_box_publickeybytes();r.length!==d&&f(s,"invalid publicKey length"),i=v(r),s.push(i),n=k(s,n,"privateKey");var m,x=0|a._crypto_box_secretkeybytes();n.length!==x&&f(s,"invalid privateKey length"),m=v(n),s.push(m);var E=new l(0|h),w=E.address;s.push(w);var S=new l(0|a._crypto_box_macbytes()),T=S.address;if(s.push(T),0==(0|a._crypto_box_detached(w,T,c,h,0,o,i,m))){var Y=y({ciphertext:E,mac:S},_);return g(s),Y}b(s,"invalid usage")}function Q(e,t,r,n,_){var s=[];u(_);var c=v(e=k(s,e,"message")),h=e.length;s.push(c),t=k(s,t,"nonce");var o,p=0|a._crypto_box_noncebytes();t.length!==p&&f(s,"invalid nonce length"),o=v(t),s.push(o),r=k(s,r,"publicKey");var i,d=0|a._crypto_box_publickeybytes();r.length!==d&&f(s,"invalid publicKey length"),i=v(r),s.push(i),n=k(s,n,"privateKey");var m,x=0|a._crypto_box_secretkeybytes();n.length!==x&&f(s,"invalid privateKey length"),m=v(n),s.push(m);var E=new l(h+a._crypto_box_macbytes()|0),w=E.address;if(s.push(w),0==(0|a._crypto_box_easy(w,c,h,0,o,i,m))){var S=y(E,_);return g(s),S}b(s,"invalid usage")}function Z(e,t,r,n){var _=[];u(n);var s=v(e=k(_,e,"message")),c=e.length;_.push(s),t=k(_,t,"nonce");var h,o=0|a._crypto_box_noncebytes();t.length!==o&&f(_,"invalid nonce length"),h=v(t),_.push(h),r=k(_,r,"sharedKey");var p,i=0|a._crypto_box_beforenmbytes();r.length!==i&&f(_,"invalid sharedKey length"),p=v(r),_.push(p);var d=new l(c+a._crypto_box_macbytes()|0),m=d.address;if(_.push(m),0==(0|a._crypto_box_easy_afternm(m,s,c,0,h,p))){var x=y(d,n);return g(_),x}b(_,"invalid usage")}function $(e){var t=[];u(e);var r=new l(0|a._crypto_box_publickeybytes()),n=r.address;t.push(n);var _=new l(0|a._crypto_box_secretkeybytes()),s=_.address;if(t.push(s),0==(0|a._crypto_box_keypair(n,s))){var c={publicKey:y(r,e),privateKey:y(_,e),keyType:"x25519"};return g(t),c}b(t,"internal error")}function ee(e,t,r,n,_,s){var c=[];u(s);var h=v(e=k(c,e,"ciphertext")),o=e.length;c.push(h),t=k(c,t,"mac");var p,i=0|a._crypto_box_macbytes();t.length!==i&&f(c,"invalid mac length"),p=v(t),c.push(p),r=k(c,r,"nonce");var d,m=0|a._crypto_box_noncebytes();r.length!==m&&f(c,"invalid nonce length"),d=v(r),c.push(d),n=k(c,n,"publicKey");var x,E=0|a._crypto_box_publickeybytes();n.length!==E&&f(c,"invalid publicKey length"),x=v(n),c.push(x),_=k(c,_,"privateKey");var w,S=0|a._crypto_box_secretkeybytes();_.length!==S&&f(c,"invalid privateKey length"),w=v(_),c.push(w);var T=new l(0|o),Y=T.address;if(c.push(Y),0==(0|a._crypto_box_open_detached(Y,h,p,o,0,d,x,w))){var A=y(T,s);return g(c),A}b(c,"incorrect key pair for the given ciphertext")}function te(e,t,r,n,_){var s=[];u(_),e=k(s,e,"ciphertext");var c,h=0|a._crypto_box_macbytes();e.length!==h&&f(s,"invalid ciphertext length"),c=v(e),s.push(c),t=k(s,t,"nonce");var o,p=0|a._crypto_box_noncebytes();t.length!==p&&f(s,"invalid nonce length"),o=v(t),s.push(o),r=k(s,r,"publicKey");var i,d=0|a._crypto_box_publickeybytes();r.length!==d&&f(s,"invalid publicKey length"),i=v(r),s.push(i),n=k(s,n,"privateKey");var m,x=0|a._crypto_box_secretkeybytes();n.length!==x&&f(s,"invalid privateKey length"),m=v(n),s.push(m);var E=new l(h-a._crypto_box_macbytes()|0),w=E.address;if(s.push(w),0==(0|a._crypto_box_open_easy(w,c,h,0,o,i,m))){var S=y(E,_);return g(s),S}b(s,"incorrect key pair for the given ciphertext")}function ae(e,t,r,n){var _=[];u(n);var s=v(e=k(_,e,"ciphertext")),c=e.length;_.push(s),t=k(_,t,"nonce");var h,o=0|a._crypto_box_noncebytes();t.length!==o&&f(_,"invalid nonce length"),h=v(t),_.push(h),r=k(_,r,"sharedKey");var p,i=0|a._crypto_box_beforenmbytes();r.length!==i&&f(_,"invalid sharedKey length"),p=v(r),_.push(p);var d=new l(c-a._crypto_box_macbytes()|0),m=d.address;if(_.push(m),0==(0|a._crypto_box_open_easy_afternm(m,s,c,0,h,p))){var x=y(d,n);return g(_),x}b(_,"incorrect secret key for the given ciphertext")}function re(e,t,r){var n=[];u(r);var _=v(e=k(n,e,"message")),s=e.length;n.push(_),t=k(n,t,"publicKey");var c,h=0|a._crypto_box_publickeybytes();t.length!==h&&f(n,"invalid publicKey length"),c=v(t),n.push(c);var o=new l(s+a._crypto_box_sealbytes()|0),p=o.address;if(n.push(p),0==(0|a._crypto_box_seal(p,_,s,0,c))){var i=y(o,r);return g(n),i}b(n,"invalid usage")}function ne(e,t,r,n){var _=[];u(n),e=k(_,e,"ciphertext");var s,c=0|a._crypto_box_sealbytes();e.length!==c&&f(_,"invalid ciphertext length"),s=v(e),_.push(s),t=k(_,t,"publicKey");var h,o=0|a._crypto_box_publickeybytes();t.length!==o&&f(_,"invalid publicKey length"),h=v(t),_.push(h),r=k(_,r,"privateKey");var p,i=0|a._crypto_box_secretkeybytes();r.length!==i&&f(_,"invalid privateKey length"),p=v(r),_.push(p);var d=new l(c-a._crypto_box_sealbytes()|0),m=d.address;if(_.push(m),0==(0|a._crypto_box_seal_open(m,s,c,0,h,p))){var x=y(d,n);return g(_),x}b(_,"incorrect key pair for the given ciphertext")}function _e(e,t){var r=[];u(t),e=k(r,e,"seed");var n,_=0|a._crypto_box_seedbytes();e.length!==_&&f(r,"invalid seed length"),n=v(e),r.push(n);var s=new l(0|a._crypto_box_publickeybytes()),c=s.address;r.push(c);var h=new l(0|a._crypto_box_secretkeybytes()),o=h.address;if(r.push(o),0==(0|a._crypto_box_seed_keypair(c,o,n))){var p={publicKey:y(s,t),privateKey:y(h,t),keyType:"x25519"};return g(r),p}b(r,"invalid usage")}function se(e,t,r,n){var _=[];u(n),m(_,e,"hash_length"),("number"!=typeof e||(0|e)!==e||e<0)&&f(_,"hash_length must be an unsigned integer");var s=v(t=k(_,t,"message")),c=t.length;_.push(s);var h=null,o=0;void 0!=r&&(h=v(r=k(_,r,"key")),o=r.length,_.push(h));var p=new l(e|=0),i=p.address;if(_.push(i),0==(0|a._crypto_generichash(i,e,s,c,0,h,o))){var d=y(p,n);return g(_),d}b(_,"invalid usage")}function ce(e,t,r){var n=[];u(r),m(n,e,"state_address"),m(n,t,"hash_length"),("number"!=typeof t||(0|t)!==t||t<0)&&f(n,"hash_length must be an unsigned integer");var _=new l(t|=0),s=_.address;if(n.push(s),0==(0|a._crypto_generichash_final(e,s,t))){var c=(a._free(e),y(_,r));return g(n),c}b(n,"invalid usage")}function he(e,t,r){var n=[];u(r);var _=null,s=0;void 0!=e&&(_=v(e=k(n,e,"key")),s=e.length,n.push(_)),m(n,t,"hash_length"),("number"!=typeof t||(0|t)!==t||t<0)&&f(n,"hash_length must be an unsigned integer");var c=new l(357).address;if(0==(0|a._crypto_generichash_init(c,_,s,t))){var h=c;return g(n),h}b(n,"invalid usage")}function oe(e){var t=[];u(e);var r=new l(0|a._crypto_generichash_keybytes()),n=r.address;t.push(n),a._crypto_generichash_keygen(n);var _=y(r,e);return g(t),_}function pe(e,t,r){var n=[];u(r),m(n,e,"state_address");var _=v(t=k(n,t,"message_chunk")),s=t.length;n.push(_),0!=(0|a._crypto_generichash_update(e,_,s))&&b(n,"invalid usage"),g(n)}function ye(e,t){var r=[];u(t);var n=v(e=k(r,e,"message")),_=e.length;r.push(n);var s=new l(0|a._crypto_hash_bytes()),c=s.address;if(r.push(c),0==(0|a._crypto_hash(c,n,_,0))){var h=y(s,t);return g(r),h}b(r,"invalid usage")}function ie(e,t){var r=[];u(t);var n=v(e=k(r,e,"message")),_=e.length;r.push(n);var s=new l(0|a._crypto_hash_sha256_bytes()),c=s.address;if(r.push(c),0==(0|a._crypto_hash_sha256(c,n,_,0))){var h=y(s,t);return g(r),h}b(r,"invalid usage")}function ue(e,t){var r=[];u(t);var n=v(e=k(r,e,"message")),_=e.length;r.push(n);var s=new l(0|a._crypto_hash_sha512_bytes()),c=s.address;if(r.push(c),0==(0|a._crypto_hash_sha512(c,n,_,0))){var h=y(s,t);return g(r),h}b(r,"invalid usage")}function le(e,t,r,n,s){var c=[];u(s),m(c,e,"subkey_len"),("number"!=typeof e||(0|e)!==e||e<0)&&f(c,"subkey_len must be an unsigned integer"),m(c,t,"subkey_id"),("number"!=typeof t||(0|t)!==t||t<0)&&f(c,"subkey_id must be an unsigned integer");var h=v(r=_(r+"\0"));r.length,c.push(h),n=k(c,n,"key");var o,p=0|a._crypto_kdf_keybytes();n.length!==p&&f(c,"invalid key length"),o=v(n),c.push(o);var i=new l(0|e),d=i.address;c.push(d),a._crypto_kdf_derive_from_key(d,e,t,0,h,o);var b=y(i,s);return g(c),b}function ve(e){var t=[];u(e);var r=new l(0|a._crypto_kdf_keybytes()),n=r.address;t.push(n),a._crypto_kdf_keygen(n);var _=y(r,e);return g(t),_}function de(e,t,r,n){var _=[];u(n),e=k(_,e,"clientPublicKey");var s,c=0|a._crypto_kx_publickeybytes();e.length!==c&&f(_,"invalid clientPublicKey length"),s=v(e),_.push(s),t=k(_,t,"clientSecretKey");var h,o=0|a._crypto_kx_secretkeybytes();t.length!==o&&f(_,"invalid clientSecretKey length"),h=v(t),_.push(h),r=k(_,r,"serverPublicKey");var p,i=0|a._crypto_kx_publickeybytes();r.length!==i&&f(_,"invalid serverPublicKey length"),p=v(r),_.push(p);var d=new l(0|a._crypto_kx_sessionkeybytes()),m=d.address;_.push(m);var x=new l(0|a._crypto_kx_sessionkeybytes()),E=x.address;if(_.push(E),0==(0|a._crypto_kx_client_session_keys(m,E,s,h,p))){var w=y({sharedRx:d,sharedTx:x},n);return g(_),w}b(_,"invalid usage")}function ge(e){var t=[];u(e);var r=new l(0|a._crypto_kx_publickeybytes()),n=r.address;t.push(n);var _=new l(0|a._crypto_kx_secretkeybytes()),s=_.address;if(t.push(s),0==(0|a._crypto_kx_keypair(n,s))){var c={publicKey:y(r,e),privateKey:y(_,e),keyType:"x25519"};return g(t),c}b(t,"internal error")}function be(e,t){var r=[];u(t),e=k(r,e,"seed");var n,_=0|a._crypto_kx_seedbytes();e.length!==_&&f(r,"invalid seed length"),n=v(e),r.push(n);var s=new l(0|a._crypto_kx_publickeybytes()),c=s.address;r.push(c);var h=new l(0|a._crypto_kx_secretkeybytes()),o=h.address;if(r.push(o),0==(0|a._crypto_kx_seed_keypair(c,o,n))){var p={publicKey:y(s,t),privateKey:y(h,t),keyType:"x25519"};return g(r),p}b(r,"internal error")}function fe(e,t,r,n){var _=[];u(n),e=k(_,e,"serverPublicKey");var s,c=0|a._crypto_kx_publickeybytes();e.length!==c&&f(_,"invalid serverPublicKey length"),s=v(e),_.push(s),t=k(_,t,"serverSecretKey");var h,o=0|a._crypto_kx_secretkeybytes();t.length!==o&&f(_,"invalid serverSecretKey length"),h=v(t),_.push(h),r=k(_,r,"clientPublicKey");var p,i=0|a._crypto_kx_publickeybytes();r.length!==i&&f(_,"invalid clientPublicKey length"),p=v(r),_.push(p);var d=new l(0|a._crypto_kx_sessionkeybytes()),m=d.address;_.push(m);var x=new l(0|a._crypto_kx_sessionkeybytes()),E=x.address;if(_.push(E),0==(0|a._crypto_kx_server_session_keys(m,E,s,h,p))){var w=y({sharedRx:d,sharedTx:x},n);return g(_),w}b(_,"invalid usage")}function me(e,t,r){var n=[];u(r);var _=v(e=k(n,e,"message")),s=e.length;n.push(_),t=k(n,t,"key");var c,h=0|a._crypto_onetimeauth_keybytes();t.length!==h&&f(n,"invalid key length"),c=v(t),n.push(c);var o=new l(0|a._crypto_onetimeauth_bytes()),p=o.address;if(n.push(p),0==(0|a._crypto_onetimeauth(p,_,s,0,c))){var i=y(o,r);return g(n),i}b(n,"invalid usage")}function ke(e,t){var r=[];u(t),m(r,e,"state_address");var n=new l(0|a._crypto_onetimeauth_bytes()),_=n.address;if(r.push(_),0==(0|a._crypto_onetimeauth_final(e,_))){var s=(a._free(e),y(n,t));return g(r),s}b(r,"invalid usage")}function xe(e,t){var r=[];u(t);var n=null;void 0!=e&&(n=v(e=k(r,e,"key")),e.length,r.push(n));var _=new l(144).address;if(0==(0|a._crypto_onetimeauth_init(_,n))){var s=_;return g(r),s}b(r,"invalid usage")}function Ee(e){var t=[];u(e);var r=new l(0|a._crypto_onetimeauth_keybytes()),n=r.address;t.push(n),a._crypto_onetimeauth_keygen(n);var _=y(r,e);return g(t),_}function we(e,t,r){var n=[];u(r),m(n,e,"state_address");var _=v(t=k(n,t,"message_chunk")),s=t.length;n.push(_),0!=(0|a._crypto_onetimeauth_update(e,_,s))&&b(n,"invalid usage"),g(n)}function Se(e,t,r){var n=[];e=k(n,e,"hash");var _,s=0|a._crypto_onetimeauth_bytes();e.length!==s&&f(n,"invalid hash length"),_=v(e),n.push(_);var c=v(t=k(n,t,"message")),h=t.length;n.push(c),r=k(n,r,"key");var o,p=0|a._crypto_onetimeauth_keybytes();r.length!==p&&f(n,"invalid key length"),o=v(r),n.push(o);var y=0==(0|a._crypto_onetimeauth_verify(_,c,h,0,o));return g(n),y}function Te(e,t,r,n,_,s,c){var h=[];u(c),m(h,e,"keyLength"),("number"!=typeof e||(0|e)!==e||e<0)&&f(h,"keyLength must be an unsigned integer");var o=v(t=k(h,t,"password")),p=t.length;h.push(o),r=k(h,r,"salt");var i,d=0|a._crypto_pwhash_saltbytes();r.length!==d&&f(h,"invalid salt length"),i=v(r),h.push(i),m(h,n,"opsLimit"),("number"!=typeof n||(0|n)!==n||n<0)&&f(h,"opsLimit must be an unsigned integer"),m(h,_,"memLimit"),("number"!=typeof _||(0|_)!==_||_<0)&&f(h,"memLimit must be an unsigned integer"),m(h,s,"algorithm"),("number"!=typeof s||(0|s)!==s||s<0)&&f(h,"algorithm must be an unsigned integer");var x=new l(0|e),E=x.address;if(h.push(E),0==(0|a._crypto_pwhash(E,e,0,o,p,0,i,n,0,_,s))){var w=y(x,c);return g(h),w}b(h,"invalid usage")}function Ye(e,t,r,n,_,s){var c=[];u(s),m(c,e,"keyLength"),("number"!=typeof e||(0|e)!==e||e<0)&&f(c,"keyLength must be an unsigned integer");var h=v(t=k(c,t,"password")),o=t.length;c.push(h),r=k(c,r,"salt");var p,i=0|a._crypto_pwhash_scryptsalsa208sha256_saltbytes();r.length!==i&&f(c,"invalid salt length"),p=v(r),c.push(p),m(c,n,"opsLimit"),("number"!=typeof n||(0|n)!==n||n<0)&&f(c,"opsLimit must be an unsigned integer"),m(c,_,"memLimit"),("number"!=typeof _||(0|_)!==_||_<0)&&f(c,"memLimit must be an unsigned integer");var d=new l(0|e),x=d.address;if(c.push(x),0==(0|a._crypto_pwhash_scryptsalsa208sha256(x,e,0,h,o,0,p,n,0,_))){var E=y(d,s);return g(c),E}b(c,"invalid usage")}function Ae(e,t,r,n,_,s,c){var h=[];u(c);var o=v(e=k(h,e,"password")),p=e.length;h.push(o);var i=v(t=k(h,t,"salt")),d=t.length;h.push(i),m(h,r,"opsLimit"),("number"!=typeof r||(0|r)!==r||r<0)&&f(h,"opsLimit must be an unsigned integer"),m(h,n,"r"),("number"!=typeof n||(0|n)!==n||n<0)&&f(h,"r must be an unsigned integer"),m(h,_,"p"),("number"!=typeof _||(0|_)!==_||_<0)&&f(h,"p must be an unsigned integer"),m(h,s,"keyLength"),("number"!=typeof s||(0|s)!==s||s<0)&&f(h,"keyLength must be an unsigned integer");var x=new l(0|s),E=x.address;if(h.push(E),0==(0|a._crypto_pwhash_scryptsalsa208sha256_ll(o,p,i,d,r,0,n,_,E,s))){var w=y(x,c);return g(h),w}b(h,"invalid usage")}function Ke(e,t,r,n){var _=[];u(n);var s=v(e=k(_,e,"password")),c=e.length;_.push(s),m(_,t,"opsLimit"),("number"!=typeof t||(0|t)!==t||t<0)&&f(_,"opsLimit must be an unsigned integer"),m(_,r,"memLimit"),("number"!=typeof r||(0|r)!==r||r<0)&&f(_,"memLimit must be an unsigned integer");var h=new l(0|a._crypto_pwhash_scryptsalsa208sha256_strbytes()).address;if(_.push(h),0==(0|a._crypto_pwhash_scryptsalsa208sha256_str(h,s,c,0,t,0,r))){var o=a.Pointer_stringify(h);return g(_),o}b(_,"invalid usage")}function Be(e,t,r){var n=[];u(r);var s=v(e=_(e+"\0"));e.length,n.push(s);var c=v(t=k(n,t,"password")),h=t.length;n.push(c);var o=0==(0|a._crypto_pwhash_scryptsalsa208sha256_str_verify(s,c,h,0));return g(n),o}function Ie(e,t,r,n){var _=[];u(n);var s=v(e=k(_,e,"password")),c=e.length;_.push(s),m(_,t,"opsLimit"),("number"!=typeof t||(0|t)!==t||t<0)&&f(_,"opsLimit must be an unsigned integer"),m(_,r,"memLimit"),("number"!=typeof r||(0|r)!==r||r<0)&&f(_,"memLimit must be an unsigned integer");var h=new l(0|a._crypto_pwhash_strbytes()).address;if(_.push(h),0==(0|a._crypto_pwhash_str(h,s,c,0,t,0,r))){var o=a.Pointer_stringify(h);return g(_),o}b(_,"invalid usage")}function Me(e,t,r){var n=[];u(r);var s=v(e=_(e+"\0"));e.length,n.push(s);var c=v(t=k(n,t,"password")),h=t.length;n.push(c);var o=0==(0|a._crypto_pwhash_str_verify(s,c,h,0));return g(n),o}function Le(e,t,r){var n=[];u(r),e=k(n,e,"privateKey");var _,s=0|a._crypto_scalarmult_scalarbytes();e.length!==s&&f(n,"invalid privateKey length"),_=v(e),n.push(_),t=k(n,t,"publicKey");var c,h=0|a._crypto_scalarmult_scalarbytes();t.length!==h&&f(n,"invalid publicKey length"),c=v(t),n.push(c);var o=new l(0|a._crypto_scalarmult_bytes()),p=o.address;if(n.push(p),0==(0|a._crypto_scalarmult(p,_,c))){var i=y(o,r);return g(n),i}b(n,"weak public key")}function Ne(e,t){var r=[];u(t),e=k(r,e,"privateKey");var n,_=0|a._crypto_scalarmult_scalarbytes();e.length!==_&&f(r,"invalid privateKey length"),n=v(e),r.push(n);var s=new l(0|a._crypto_scalarmult_scalarbytes()),c=s.address;if(r.push(c),0==(0|a._crypto_scalarmult_base(c,n))){var h=y(s,t);return g(r),h}b(r,"insecure scalar")}function Ue(e,t,r,n){var _=[];u(n);var s=v(e=k(_,e,"message")),c=e.length;_.push(s),t=k(_,t,"nonce");var h,o=0|a._crypto_secretbox_noncebytes();t.length!==o&&f(_,"invalid nonce length"),h=v(t),_.push(h),r=k(_,r,"key");var p,i=0|a._crypto_secretbox_keybytes();r.length!==i&&f(_,"invalid key length"),p=v(r),_.push(p);var d=new l(0|c),m=d.address;_.push(m);var x=new l(0|a._crypto_secretbox_macbytes()),E=x.address;if(_.push(E),0==(0|a._crypto_secretbox_detached(m,E,s,c,0,h,p))){var w=y({mac:x,cipher:d},n);return g(_),w}b(_,"invalid usage")}function Oe(e,t,r,n){var _=[];u(n);var s=v(e=k(_,e,"message")),c=e.length;_.push(s),t=k(_,t,"nonce");var h,o=0|a._crypto_secretbox_noncebytes();t.length!==o&&f(_,"invalid nonce length"),h=v(t),_.push(h),r=k(_,r,"key");var p,i=0|a._crypto_secretbox_keybytes();r.length!==i&&f(_,"invalid key length"),p=v(r),_.push(p);var d=new l(c+a._crypto_secretbox_macbytes()|0),m=d.address;if(_.push(m),0==(0|a._crypto_secretbox_easy(m,s,c,0,h,p))){var x=y(d,n);return g(_),x}b(_,"invalid usage")}function Re(e){var t=[];u(e);var r=new l(0|a._crypto_secretbox_keybytes()),n=r.address;t.push(n),a._crypto_secretbox_keygen(n);var _=y(r,e);return g(t),_}function Pe(e,t,r,n,_){var s=[];u(_);var c=v(e=k(s,e,"ciphertext")),h=e.length;s.push(c),t=k(s,t,"mac");var o,p=0|a._crypto_secretbox_macbytes();t.length!==p&&f(s,"invalid mac length"),o=v(t),s.push(o),r=k(s,r,"nonce");var i,d=0|a._crypto_secretbox_noncebytes();r.length!==d&&f(s,"invalid nonce length"),i=v(r),s.push(i),n=k(s,n,"key");var m,x=0|a._crypto_secretbox_keybytes();n.length!==x&&f(s,"invalid key length"),m=v(n),s.push(m);var E=new l(0|h),w=E.address;if(s.push(w),0==(0|a._crypto_secretbox_open_detached(w,c,o,h,0,i,m))){var S=y(E,_);return g(s),S}b(s,"wrong secret key for the given ciphertext")}function Ce(e,t,r,n){var _=[];u(n),e=k(_,e,"ciphertext");var s,c=0|a._crypto_secretbox_macbytes();e.length!==c&&f(_,"invalid ciphertext length"),s=v(e),_.push(s),t=k(_,t,"nonce");var h,o=0|a._crypto_secretbox_noncebytes();t.length!==o&&f(_,"invalid nonce length"),h=v(t),_.push(h),r=k(_,r,"key");var p,i=0|a._crypto_secretbox_keybytes();r.length!==i&&f(_,"invalid key length"),p=v(r),_.push(p);var d=new l(c-a._crypto_secretbox_macbytes()|0),m=d.address;if(_.push(m),0==(0|a._crypto_secretbox_open_easy(m,s,c,0,h,p))){var x=y(d,n);return g(_),x}b(_,"wrong secret key for the given ciphertext")}function Ge(e,t,r){var n=[];u(r),e=k(n,e,"header");var _,s=0|a._crypto_secretstream_xchacha20poly1305_headerbytes();e.length!==s&&f(n,"invalid header length"),_=v(e),n.push(_),t=k(n,t,"key");var c,h=0|a._crypto_secretstream_xchacha20poly1305_keybytes();t.length!==h&&f(n,"invalid key length"),c=v(t),n.push(c);var o=new l(52).address;if(0==(0|a._crypto_secretstream_xchacha20poly1305_init_pull(o,_,c))){var p=o;return g(n),p}b(n,"invalid usage")}function De(e,t){var r=[];u(t),e=k(r,e,"key");var n,_=0|a._crypto_secretstream_xchacha20poly1305_keybytes();e.length!==_&&f(r,"invalid key length"),n=v(e),r.push(n);var s=new l(52).address,c=new l(0|a._crypto_secretstream_xchacha20poly1305_headerbytes()),h=c.address;if(r.push(h),0==(0|a._crypto_secretstream_xchacha20poly1305_init_push(s,h,n))){var o={state:s,header:y(c,t)};return g(r),o}b(r,"invalid usage")}function Xe(e){var t=[];u(e);var r=new l(0|a._crypto_secretstream_xchacha20poly1305_keybytes()),n=r.address;t.push(n),a._crypto_secretstream_xchacha20poly1305_keygen(n);var _=y(r,e);return g(t),_}function Ve(e,t,r,n){var _=[];u(n),m(_,e,"state_address"),t=k(_,t,"cipher");var s,c=0|a._crypto_secretstream_xchacha20poly1305_abytes();t.length!==c&&f(_,"invalid cipher length"),s=v(t),_.push(s);var h=null,o=0;void 0!=r&&(h=v(r=k(_,r,"ad")),o=r.length,_.push(h));var p=new l(c-a._crypto_secretstream_xchacha20poly1305_abytes()|0),i=p.address;_.push(i);var b,x=(b=d(1),_.push(b),(x=0===a._crypto_secretstream_xchacha20poly1305_pull(e,i,0,b,s,c,0,h,o)&&{tag:a.HEAPU8[b],message:p})&&{message:y(x.message,n),tag:x.tag});return g(_),x}function Fe(e,t,r,n,_){var s=[];u(_),m(s,e,"state_address");var c=v(t=k(s,t,"message_chunk")),h=t.length;s.push(c);var o=null,p=0;void 0!=r&&(o=v(r=k(s,r,"ad")),p=r.length,s.push(o)),m(s,n,"tag"),("number"!=typeof n||(0|n)!==n||n<0)&&f(s,"tag must be an unsigned integer");var i=new l(h+a._crypto_secretstream_xchacha20poly1305_abytes()|0),d=i.address;if(s.push(d),0==(0|a._crypto_secretstream_xchacha20poly1305_push(e,d,0,c,h,0,o,p,0,n))){var x=y(i,_);return g(s),x}b(s,"invalid usage")}function He(e,t){var r=[];return u(t),m(r,e,"state_address"),a._crypto_secretstream_xchacha20poly1305_rekey(e),g(r),!0}function je(e,t,r){var n=[];u(r);var _=v(e=k(n,e,"message")),s=e.length;n.push(_),t=k(n,t,"key");var c,h=0|a._crypto_shorthash_keybytes();t.length!==h&&f(n,"invalid key length"),c=v(t),n.push(c);var o=new l(0|a._crypto_shorthash_bytes()),p=o.address;if(n.push(p),0==(0|a._crypto_shorthash(p,_,s,0,c))){var i=y(o,r);return g(n),i}b(n,"invalid usage")}function ze(e){var t=[];u(e);var r=new l(0|a._crypto_shorthash_keybytes()),n=r.address;t.push(n),a._crypto_shorthash_keygen(n);var _=y(r,e);return g(t),_}function We(e,t,r){var n=[];u(r);var _=v(e=k(n,e,"message")),s=e.length;n.push(_),t=k(n,t,"key");var c,h=0|a._crypto_shorthash_siphashx24_keybytes();t.length!==h&&f(n,"invalid key length"),c=v(t),n.push(c);var o=new l(0|a._crypto_shorthash_siphashx24_bytes()),p=o.address;if(n.push(p),0==(0|a._crypto_shorthash_siphashx24(p,_,s,0,c))){var i=y(o,r);return g(n),i}b(n,"invalid usage")}function Je(e,t,r){var n=[];u(r);var _=v(e=k(n,e,"message")),s=e.length;n.push(_),t=k(n,t,"privateKey");var c,h=0|a._crypto_sign_secretkeybytes();t.length!==h&&f(n,"invalid privateKey length"),c=v(t),n.push(c);var o=new l(e.length+a._crypto_sign_bytes()|0),p=o.address;if(n.push(p),0==(0|a._crypto_sign(p,null,_,s,0,c))){var i=y(o,r);return g(n),i}b(n,"invalid usage")}function qe(e,t,r){var n=[];u(r);var _=v(e=k(n,e,"message")),s=e.length;n.push(_),t=k(n,t,"privateKey");var c,h=0|a._crypto_sign_secretkeybytes();t.length!==h&&f(n,"invalid privateKey length"),c=v(t),n.push(c);var o=new l(0|a._crypto_sign_bytes()),p=o.address;if(n.push(p),0==(0|a._crypto_sign_detached(p,null,_,s,0,c))){var i=y(o,r);return g(n),i}b(n,"invalid usage")}function Qe(e,t){var r=[];u(t),e=k(r,e,"edPk");var n,_=0|a._crypto_sign_publickeybytes();e.length!==_&&f(r,"invalid edPk length"),n=v(e),r.push(n);var s=new l(0|a._crypto_scalarmult_scalarbytes()),c=s.address;if(r.push(c),0==(0|a._crypto_sign_ed25519_pk_to_curve25519(c,n))){var h=y(s,t);return g(r),h}b(r,"invalid key")}function Ze(e,t){var r=[];u(t),e=k(r,e,"edSk");var n,_=0|a._crypto_sign_secretkeybytes();e.length!==_&&f(r,"invalid edSk length"),n=v(e),r.push(n);var s=new l(0|a._crypto_scalarmult_scalarbytes()),c=s.address;if(r.push(c),0==(0|a._crypto_sign_ed25519_sk_to_curve25519(c,n))){var h=y(s,t);return g(r),h}b(r,"invalid key")}function $e(e,t){var r=[];u(t),e=k(r,e,"privateKey");var n,_=0|a._crypto_sign_secretkeybytes();e.length!==_&&f(r,"invalid privateKey length"),n=v(e),r.push(n);var s=new l(0|a._crypto_sign_publickeybytes()),c=s.address;if(r.push(c),0==(0|a._crypto_sign_ed25519_sk_to_pk(c,n))){var h=y(s,t);return g(r),h}b(r,"invalid key")}function et(e,t){var r=[];u(t),e=k(r,e,"privateKey");var n,_=0|a._crypto_sign_secretkeybytes();e.length!==_&&f(r,"invalid privateKey length"),n=v(e),r.push(n);var s=new l(0|a._crypto_sign_seedbytes()),c=s.address;if(r.push(c),0==(0|a._crypto_sign_ed25519_sk_to_seed(c,n))){var h=y(s,t);return g(r),h}b(r,"invalid key")}function tt(e,t,r){var n=[];u(r),m(n,e,"state_address"),t=k(n,t,"privateKey");var _,s=0|a._crypto_sign_secretkeybytes();t.length!==s&&f(n,"invalid privateKey length"),_=v(t),n.push(_);var c=new l(0|a._crypto_sign_bytes()),h=c.address;if(n.push(h),0==(0|a._crypto_sign_final_create(e,h,null,_))){var o=(a._free(e),y(c,r));return g(n),o}b(n,"invalid usage")}function at(e,t,r,n){var _=[];u(n),m(_,e,"state_address"),t=k(_,t,"signature");var s,c=0|a._crypto_sign_bytes();t.length!==c&&f(_,"invalid signature length"),s=v(t),_.push(s),r=k(_,r,"publicKey");var h,o=0|a._crypto_sign_publickeybytes();r.length!==o&&f(_,"invalid publicKey length"),h=v(r),_.push(h);var p=0==(0|a._crypto_sign_final_verify(e,s,h));return g(_),p}function rt(e){var t=[];u(e);var r=new l(208).address;if(0==(0|a._crypto_sign_init(r))){var n=r;return g(t),n}b(t,"internal error")}function nt(e){var t=[];u(e);var r=new l(0|a._crypto_sign_publickeybytes()),n=r.address;t.push(n);var _=new l(0|a._crypto_sign_secretkeybytes()),s=_.address;if(t.push(s),0==(0|a._crypto_sign_keypair(n,s))){var c={publicKey:y(r,e),privateKey:y(_,e),keyType:"ed25519"};return g(t),c}b(t,"internal error")}function _t(e,t,r){var n=[];u(r),e=k(n,e,"signedMessage");var _,s=0|a._crypto_sign_bytes();e.length!==s&&f(n,"invalid signedMessage length"),_=v(e),n.push(_),t=k(n,t,"publicKey");var c,h=0|a._crypto_sign_publickeybytes();t.length!==h&&f(n,"invalid publicKey length"),c=v(t),n.push(c);var o=new l(s-a._crypto_sign_bytes()|0),p=o.address;if(n.push(p),0==(0|a._crypto_sign_open(p,null,_,s,0,c))){var i=y(o,r);return g(n),i}b(n,"incorrect signature for the given public key")}function st(e,t){var r=[];u(t),e=k(r,e,"seed");var n,_=0|a._crypto_sign_seedbytes();e.length!==_&&f(r,"invalid seed length"),n=v(e),r.push(n);var s=new l(0|a._crypto_sign_publickeybytes()),c=s.address;r.push(c);var h=new l(0|a._crypto_sign_secretkeybytes()),o=h.address;if(r.push(o),0==(0|a._crypto_sign_seed_keypair(c,o,n))){var p={publicKey:y(s,t),privateKey:y(h,t),keyType:"ed25519"};return g(r),p}b(r,"invalid usage")}function ct(e,t,r){var n=[];u(r),m(n,e,"state_address");var _=v(t=k(n,t,"message_chunk")),s=t.length;n.push(_),0!=(0|a._crypto_sign_update(e,_,s))&&b(n,"invalid usage"),g(n)}function ht(e,t,r){var n=[];e=k(n,e,"signature");var _,s=0|a._crypto_sign_bytes();e.length!==s&&f(n,"invalid signature length"),_=v(e),n.push(_);var c=v(t=k(n,t,"message")),h=t.length;n.push(c),r=k(n,r,"publicKey");var o,p=0|a._crypto_sign_publickeybytes();r.length!==p&&f(n,"invalid publicKey length"),o=v(r),n.push(o);var y=0==(0|a._crypto_sign_verify_detached(_,c,h,0,o));return g(n),y}function ot(e,t,r,n){var _=[];u(n),m(_,e,"outLength"),("number"!=typeof e||(0|e)!==e||e<0)&&f(_,"outLength must be an unsigned integer"),t=k(_,t,"key");var s,c=0|a._crypto_stream_chacha20_keybytes();t.length!==c&&f(_,"invalid key length"),s=v(t),_.push(s),r=k(_,r,"nonce");var h,o=0|a._crypto_stream_chacha20_noncebytes();r.length!==o&&f(_,"invalid nonce length"),h=v(r),_.push(h);var p=new l(0|e),i=p.address;_.push(i),a._crypto_stream_chacha20(i,e,0,h,s);var d=y(p,n);return g(_),d}function pt(e,t,r,n){var _=[];u(n);var s=v(e=k(_,e,"input_message")),c=e.length;_.push(s),t=k(_,t,"nonce");var h,o=0|a._crypto_stream_chacha20_ietf_noncebytes();t.length!==o&&f(_,"invalid nonce length"),h=v(t),_.push(h),r=k(_,r,"key");var p,i=0|a._crypto_stream_chacha20_ietf_keybytes();r.length!==i&&f(_,"invalid key length"),p=v(r),_.push(p);var d=new l(0|c),m=d.address;if(_.push(m),0===a._crypto_stream_chacha20_ietf_xor(m,s,c,0,h,p)){var x=y(d,n);return g(_),x}b(_,"invalid usage")}function yt(e,t,r,n,_){var s=[];u(_);var c=v(e=k(s,e,"input_message")),h=e.length;s.push(c),t=k(s,t,"nonce");var o,p=0|a._crypto_stream_chacha20_ietf_noncebytes();t.length!==p&&f(s,"invalid nonce length"),o=v(t),s.push(o),m(s,r,"nonce_increment"),("number"!=typeof r||(0|r)!==r||r<0)&&f(s,"nonce_increment must be an unsigned integer"),n=k(s,n,"key");var i,d=0|a._crypto_stream_chacha20_ietf_keybytes();n.length!==d&&f(s,"invalid key length"),i=v(n),s.push(i);var x=new l(0|h),E=x.address;if(s.push(E),0===a._crypto_stream_chacha20_ietf_xor_ic(E,c,h,0,o,r,0,i)){var w=y(x,_);return g(s),w}b(s,"invalid usage")}function it(e){var t=[];u(e);var r=new l(0|a._crypto_stream_chacha20_keybytes()),n=r.address;t.push(n),a._crypto_stream_chacha20_keygen(n);var _=y(r,e);return g(t),_}function ut(e,t,r,n){var _=[];u(n);var s=v(e=k(_,e,"input_message")),c=e.length;_.push(s),t=k(_,t,"nonce");var h,o=0|a._crypto_stream_chacha20_noncebytes();t.length!==o&&f(_,"invalid nonce length"),h=v(t),_.push(h),r=k(_,r,"key");var p,i=0|a._crypto_stream_chacha20_keybytes();r.length!==i&&f(_,"invalid key length"),p=v(r),_.push(p);var d=new l(0|c),m=d.address;if(_.push(m),0===a._crypto_stream_chacha20_xor(m,s,c,0,h,p)){var x=y(d,n);return g(_),x}b(_,"invalid usage")}function lt(e,t,r,n,_){var s=[];u(_);var c=v(e=k(s,e,"input_message")),h=e.length;s.push(c),t=k(s,t,"nonce");var o,p=0|a._crypto_stream_chacha20_noncebytes();t.length!==p&&f(s,"invalid nonce length"),o=v(t),s.push(o),m(s,r,"nonce_increment"),("number"!=typeof r||(0|r)!==r||r<0)&&f(s,"nonce_increment must be an unsigned integer"),n=k(s,n,"key");var i,d=0|a._crypto_stream_chacha20_keybytes();n.length!==d&&f(s,"invalid key length"),i=v(n),s.push(i);var x=new l(0|h),E=x.address;if(s.push(E),0===a._crypto_stream_chacha20_xor_ic(E,c,h,0,o,r,0,i)){var w=y(x,_);return g(s),w}b(s,"invalid usage")}function vt(e){var t=[];u(e);var r=new l(0|a._crypto_stream_keybytes()),n=r.address;t.push(n),a._crypto_stream_keygen(n);var _=y(r,e);return g(t),_}function dt(e){var t=[];u(e);var r=new l(0|a._crypto_stream_xchacha20_keybytes()),n=r.address;t.push(n),a._crypto_stream_xchacha20_keygen(n);var _=y(r,e);return g(t),_}function gt(e,t,r,n){var _=[];u(n);var s=v(e=k(_,e,"input_message")),c=e.length;_.push(s),t=k(_,t,"nonce");var h,o=0|a._crypto_stream_xchacha20_noncebytes();t.length!==o&&f(_,"invalid nonce length"),h=v(t),_.push(h),r=k(_,r,"key");var p,i=0|a._crypto_stream_xchacha20_keybytes();r.length!==i&&f(_,"invalid key length"),p=v(r),_.push(p);var d=new l(0|c),m=d.address;if(_.push(m),0===a._crypto_stream_xchacha20_xor(m,s,c,0,h,p)){var x=y(d,n);return g(_),x}b(_,"invalid usage")}function bt(e,t,r,n,_){var s=[];u(_);var c=v(e=k(s,e,"input_message")),h=e.length;s.push(c),t=k(s,t,"nonce");var o,p=0|a._crypto_stream_xchacha20_noncebytes();t.length!==p&&f(s,"invalid nonce length"),o=v(t),s.push(o),m(s,r,"nonce_increment"),("number"!=typeof r||(0|r)!==r||r<0)&&f(s,"nonce_increment must be an unsigned integer"),n=k(s,n,"key");var i,d=0|a._crypto_stream_xchacha20_keybytes();n.length!==d&&f(s,"invalid key length"),i=v(n),s.push(i);var x=new l(0|h),E=x.address;if(s.push(E),0===a._crypto_stream_xchacha20_xor_ic(E,c,h,0,o,r,0,i)){var w=y(x,_);return g(s),w}b(s,"invalid usage")}function ft(e,t){var r=[];u(t),m(r,e,"length"),("number"!=typeof e||(0|e)!==e||e<0)&&f(r,"length must be an unsigned integer");var n=new l(0|e),_=n.address;r.push(_),a._randombytes_buf(_,e);var s=y(n,t);return g(r),s}function mt(e,t,r){var n=[];u(r),m(n,e,"length"),("number"!=typeof e||(0|e)!==e||e<0)&&f(n,"length must be an unsigned integer"),t=k(n,t,"seed");var _,s=0|a._randombytes_seedbytes();t.length!==s&&f(n,"invalid seed length"),_=v(t),n.push(_);var c=new l(0|e),h=c.address;n.push(h),a._randombytes_buf_deterministic(h,e,_);var o=y(c,r);return g(n),o}function kt(e){u(e),a._randombytes_close()}function xt(e){u(e);var t=a._randombytes_random()>>>0;return g([]),t}function Et(e,t){var r=[];u(t);for(var n=a._malloc(24),_=0;_<6;_++)a.setValue(n+4*_,a.Runtime.addFunction(e[["implementation_name","random","stir","uniform","buf","close"][_]]),"i32");0!=(0|a._randombytes_set_implementation(n))&&b(r,"unsupported implementation"),g(r)}function wt(e){u(e),a._randombytes_stir()}function St(e,t){var r=[];u(t),m(r,e,"upper_bound"),("number"!=typeof e||(0|e)!==e||e<0)&&f(r,"upper_bound must be an unsigned integer");var n=a._randombytes_uniform(e)>>>0;return g(r),n}function Tt(){var e=a._sodium_version_string(),t=a.Pointer_stringify(e);return g([]),t}return l.prototype.to_Uint8Array=function(){var e=new Uint8Array(this.length);return e.set(a.HEAPU8.subarray(this.address,this.address+this.length)),e},e.add=function(e,t){if(!(e instanceof Uint8Array&&t instanceof Uint8Array))throw new TypeError("Only Uint8Array instances can added");var a=e.length,r=0,n=0;if(t.length!=e.length)throw new TypeError("Arguments must have the same length");for(n=0;n<a;n++)r>>=8,r+=e[n]+t[a],e[n]=255&r},e.base64_variants=h,e.compare=function(e,t){if(!(e instanceof Uint8Array&&t instanceof Uint8Array))throw new TypeError("Only Uint8Array instances can be compared");if(e.length!==t.length)throw new TypeError("Only instances of identical length can be compared");for(var a=0,r=1,n=e.length;n-- >0;)a|=t[n]-e[n]>>8&r,r&=(t[n]^e[n])-1>>8;return a+a+r-1},e.from_base64=function(e,t){t=o(t);var r,n=[],_=new l(3*(e=k(n,e,"input")).length/4),s=v(e),c=d(4),h=d(4);return n.push(s),n.push(_.address),n.push(_.result_bin_len_p),n.push(_.b64_end_p),0!==a._sodium_base642bin(_.address,_.length,s,e.length,0,c,h,t)&&b(n,"invalid input"),a.getValue(h,"i32")-s!==e.length&&b(n,"incomplete input"),_.length=a.getValue(c,"i32"),r=_.to_Uint8Array(),g(n),r},e.from_hex=function(e){var t,r=[],n=new l((e=k(r,e,"input")).length/2),_=v(e),s=d(4);return r.push(_),r.push(n.address),r.push(n.hex_end_p),0!==a._sodium_hex2bin(n.address,n.length,_,e.length,0,0,s)&&b(r,"invalid input"),a.getValue(s,"i32")-_!==e.length&&b(r,"incomplete input"),t=n.to_Uint8Array(),g(r),t},e.from_string=_,e.increment=function(e){if(!(e instanceof Uint8Array))throw new TypeError("Only Uint8Array instances can be incremented");for(var t=256,a=0,r=e.length;a<r;a++)t>>=8,t+=e[a],e[a]=255&t},e.is_zero=function(e){if(!(e instanceof Uint8Array))throw new TypeError("Only Uint8Array instances can be checked");for(var t=0,a=0,r=e.length;a<r;a++)t|=e[a];return 0===t},e.libsodium=t,e.memcmp=function(e,t){if(!(e instanceof Uint8Array&&t instanceof Uint8Array))throw new TypeError("Only Uint8Array instances can be compared");if(e.length!==t.length)throw new TypeError("Only instances of identical length can be compared");for(var a=0,r=0,n=e.length;r<n;r++)a|=e[r]^t[r];return 0===a},e.memzero=function(e){if(!(e instanceof Uint8Array))throw new TypeError("Only Uint8Array instances can be wiped");for(var t=0,a=e.length;t<a;t++)e[t]=0},e.output_formats=function(){return["uint8array","text","hex","base64"]},e.pad=function(e,t){if(!(e instanceof Uint8Array))throw new TypeError("buffer must be a Uint8Array");if((t|=0)<=0)throw new Error("block size must be > 0");var r,n=[],_=d(4),s=1,c=0,h=0|e.length,o=new l(h+t);n.push(_),n.push(o.address);for(var p=o.address,y=o.address+h+t;p<y;p++)a.HEAPU8[p]=e[c],c+=s=1&~((65535&((h-=s)>>>48|h>>>32|h>>>16|h))-1>>16);return 0!==a._sodium_pad(_,o.address,e.length,t,o.length)&&b(n,"internal error"),o.length=a.getValue(_,"i32"),r=o.to_Uint8Array(),g(n),r},e.unpad=function(e,t){if(!(e instanceof Uint8Array))throw new TypeError("buffer must be a Uint8Array");if((t|=0)<=0)throw new Error("block size must be > 0");var r=[],n=v(e),_=d(4);return r.push(n),r.push(_),0!==a._sodium_unpad(_,n,e.length,t)&&b(r,"unsupported/invalid padding"),e=(e=new Uint8Array(e)).subarray(0,a.getValue(_,"i32")),g(r),e},e.ready=n,e.symbols=function(){return Object.keys(e).sort()},e.to_base64=p,e.to_hex=c,e.to_string=s,e}var a="object"==typeof e.sodium&&"function"==typeof e.sodium.onload?e.sodium.onload:null;"function"==typeof define&&define.amd?define(["exports","libsodium"],t):"object"==typeof exports&&"string"!=typeof exports.nodeName?t(exports,require("libsodium")):e.sodium=t(e.commonJsStrict={},e.libsodium),a&&e.sodium.ready.then(function(){a(e.sodium)})}(this);
